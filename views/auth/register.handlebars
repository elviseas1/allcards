<div class="auth-container">
    <h2>Registrar</h2>
    <form action="/register" method="post">
        <div class="form-control">
            <label for="name">Nome:</label>
            <input type="text" name="name" placeholder="Digite o seu nome" required>
        </div>
        <!--<div class="form-control">
            <label for="name">Endereço:</label>
            <input type="text" name="endereco" placeholder="Digite o seu Endereco" >
        </div>-->
        <div class="form-control">
            <label for="email">E-mail:</label>
            <input type="email" name="email" placeholder="Digite o seu e-mail" required>
        </div>
        <div class="form-control">
            <label for="name">CPF:</label>
            <input type="text" name="cpf" id="campo_cpf" placeholder="Digite o seu CPF"/ required>
        </div>
        <div class="form-control">
            <label for="name">Tipo de Usuario:</label>
            <select class="custom-select" name="acesso">
                <option value=0>Administrador</option>
                <option value=1>Cliente</option>
            </select>
        </div>
        <div class="form-control">
            <label for="name">Usuario:</label>
            <input type="text" name="useRegister" placeholder="Digite o seu usuario" required>
        </div>
        <div class="form-control">
            <label for="password">Senha:</label>
            <input type="password" name="password" placeholder="Digite a sua senha" required>
        </div>
         <div class="form-control">
            <label for="confirmpassword">Confirmação de senha:</label>
            <input type="password" name="confirmpassword" placeholder="Confirme sua senha" required>
        </div>
        <input type="submit" value="Cadastrar">
        <p>Já tem conta? <a href="/login">Clique aqui!</a></p>
    </form>
    <script>
        // VALIDANDO CPF  
        let value_cpf = document.querySelector('#campo_cpf');

            value_cpf.addEventListener("keydown", function(e) {
            if (e.key > "a" && e.key < "z") {
                e.preventDefault();
            }
            });
            value_cpf.addEventListener("blur", function(e) {
                //Remove tudo o que não é dígito
                let validar_cpf = this.value.replace( /\D/g , "");

                //verificação da quantidade números
                if (validar_cpf.length==11){

                // verificação de CPF valido
                var Soma;
                var Resto;

                Soma = 0;
                for (i=1; i<=9; i++) Soma = Soma + parseInt(validar_cpf.substring(i-1, i)) * (11 - i);
                    Resto = (Soma * 10) % 11;

                if ((Resto == 10) || (Resto == 11))  Resto = 0;
                if (Resto != parseInt(validar_cpf.substring(9, 10)) ) return alert("CPF Inválido!");;

                Soma = 0;
                for (i = 1; i <= 10; i++) Soma = Soma + parseInt(validar_cpf.substring(i-1, i)) * (12 - i);
                Resto = (Soma * 10) % 11;

                if ((Resto == 10) || (Resto == 11))  Resto = 0;
                if (Resto != parseInt(validar_cpf.substring(10, 11) ) ) return alert("CPF Inválido!");;

                //formatação final
                cpf_final = validar_cpf.replace( /(\d{3})(\d)/ , "$1.$2");
                cpf_final = cpf_final.replace( /(\d{3})(\d)/ , "$1.$2");
                cpf_final = cpf_final.replace(/(\d{3})(\d{1,2})$/ , "$1-$2");
                document.getElementById('campo_cpf').value = cpf_final;

                } else {
                alert("CPF Inválido! É esperado 11 dígitos numéricos.")
                }   

            })
        </script>
</div>